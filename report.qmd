---
title: "Project title"
subtitle: "Report"
format: html
editor: visual
execute:
  echo: true
---

```{r}
#| label: load-pkgs
#| message: false

library(tidyverse)
```

```{r}
#| label: load-play-off-data

AAAW_playoff_stats <- read_csv("data/AAAW_updatedplayoffStats.csv")
glimpse(AAAW_playoff_stats)
```

```{r}
#| label: get-above-1990

NBA_df <- AAAW_playoff_stats |>
  filter(season >= 1990)

```

```{r}
#| label: create-unique-teams

NBA_df <- NBA_df |>
  mutate(team_id = paste(season, team_id, sep = ""))

head(NBA_df)

```

```{r}
#| label: filter-noises

NBA_df <- NBA_df |>
  filter(g >= 4,
         mp_per_g >= 10)
  
```

Part 1: Basic stats

```{r}
#| label: data-wrangling-for-basic-stats

NBA_df_basic <- NBA_df |>
  mutate(pp_36 = pts_per_g / mp_per_g * 36,
         rp_36 = trb_per_g / mp_per_g * 36,
         ap_36 = ast_per_g / mp_per_g * 36)
```

```{r}
#| label: dist_basic_stats

NBA_df_basic |>
  ggplot(aes(x = pp_36)) +
  geom_histogram(binwidth = 1)

NBA_df_basic |>
  ggplot(aes(x = rp_36)) +
  geom_histogram(binwidth = 0.5)

NBA_df_basic |>
  ggplot(aes(x = ap_36)) +
  geom_histogram(binwidth = 0.2)

```

```{r}
#| label:  create-team-based

Qual_player_df_basic <- NBA_df_basic |>
  filter(pp_36 > 16 | rp_36 > 6.5 | ap_36 > 3.5) |>
  group_by(team_id) |>
  summarise(count_qual = n())


All_rot_players_df <- NBA_df |>
  group_by(team_id) |>
  summarise(count_rot = n())

Basic_df <- Qual_player_df_basic |>
  left_join(All_rot_players_df, by = "team_id")


```

```{r}
Basic_df |>
  mutate(Basic_depth = count_qual / count_rot,
         Championship = if_else(team_id %in% c("1990DET", "1991CHI", "1992CHI", "1993CHI", "1994HOU", "1995HOU", "1996CHI", "1997CHI", "1998CHI", "1999SAS", "2000LAL", "2001LAL", "2002LAL", "2003SAS", "2004DET", "2005SAS", "2006MIA", "2007SAS", "2008BOS", "2009LAL", "2010LAL", "2011DAL", "2012MIA", "2013MIA", "2014SAS", "2015GSW", "2016CLE", "2017GSW", "2018GSW", "2019TOR", "2020LAL", "2021MIL", "2022GSW"), "Champ", "No Champ" ))
```

```{r}
c("1990DET", "1991CHI", "1992CHI", "1993CHI", "1994HOU", "1995HOU", "1996CHI", "1997CHI", "1998CHI", "1999SAS", "2000LAL", "2001LAL", "2002LAL", "2003SAS", "2004DET", "2005SAS", "2006MIA", "2007SAS", "2008BOS", "2009LAL", "2010LAL", "2011DAL", "2012MIA", "2013MIA", "2014SAS", "2015GSW", "2016CLE", "2017GSW", "2018GSW", "2019TOR", "2020LAL", "2021MIL", "2022GSW") %in% Basic_df$team_id

```

Add project writeup here.
